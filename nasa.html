<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚´ã‚¸ãƒ©å®‡å®™ä¾µç•¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #00ff41;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .title {
            font-size: 2.5em;
            color: #00ff41;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.8);
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px rgba(0, 255, 65, 0.8); }
            to { text-shadow: 0 0 20px rgba(0, 255, 65, 1), 0 0 30px rgba(0, 255, 65, 0.8); }
        }

        .godzilla-emoji {
            font-size: 3em;
            display: inline-block;
            animation: roar 3s ease-in-out infinite;
        }

        @keyframes roar {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-2deg); }
            75% { transform: scale(1.05) rotate(2deg); }
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #333;
        }

        .btn {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.5);
        }

        .btn:active {
            transform: translateY(0);
        }

        .space-view {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #4a90e2;
            position: relative;
            min-height: 400px;
            overflow: hidden;
        }

        .planet {
            display: inline-block;
            margin: 10px;
            padding: 15px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            border: 3px solid #4a90e2;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            animation: float 6s ease-in-out infinite;
        }

        .planet:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(74, 144, 226, 0.8);
        }

        .planet.invaded {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            border-color: #ff4757;
            animation: destruction 1s ease-in-out;
        }

        @keyframes destruction {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); filter: brightness(2); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(180deg); }
        }

        .planet-name {
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .status-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-card {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #00ff41;
            text-align: center;
        }

        .nasa-image {
            max-width: 100%;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .loading {
            text-align: center;
            font-size: 1.2em;
            color: #00ff41;
        }

        .attack-effect {
            position: absolute;
            font-size: 2em;
            color: #ff4757;
            animation: attack 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes attack {
            0% { 
                opacity: 1; 
                transform: scale(0.5) rotate(0deg); 
            }
            100% { 
                opacity: 0; 
                transform: scale(2) rotate(360deg); 
            }
        }

        .mission-log {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #333;
            max-height: 300px;
            overflow-y: auto;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #00ff41;
            padding-left: 10px;
            animation: logAppear 0.5s ease-in;
        }

        @keyframes logAppear {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .cosmic-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00ff41;
            border-radius: 50%;
            animation: cosmic 10s linear infinite;
        }

        @keyframes cosmic {
            0% { 
                transform: translateX(-10px) translateY(100vh); 
                opacity: 0; 
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateX(100vw) translateY(-10px); 
                opacity: 0; 
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ¦• ã‚´ã‚¸ãƒ©å®‡å®™ä¾µç•¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ ğŸŒŒ</h1>
            <div class="godzilla-emoji">ğŸ¦–</div>
            <p>NASAã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€ã‚´ã‚¸ãƒ©ãŒå®‡å®™ã‚’åˆ¶è¦‡ã™ã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¥½ã—ã‚‚ã†ï¼</p>
        </div>

        <div class="controls">
            <div class="control-panel">
                <h3>ğŸš€ ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ¶å¾¡</h3>
                <button class="btn" onclick="loadNASAData()">ğŸŒ æ–°ã—ã„æƒ‘æ˜Ÿã‚’ç™ºè¦‹</button>
                <button class="btn" onclick="randomAttack()">ğŸ’¥ ãƒ©ãƒ³ãƒ€ãƒ æ”»æ’ƒ</button>
                <button class="btn" onclick="resetGame()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
            <div class="control-panel">
                <h3>ğŸ“Š ã‚´ã‚¸ãƒ©çµ±è¨ˆ</h3>
                <div id="stats">
                    <div>ä¾µç•¥æ¸ˆã¿æƒ‘æ˜Ÿ: <span id="invaded-count">0</span></div>
                    <div>ç·ç ´å£ŠåŠ›: <span id="destruction-power">0</span> ãƒ¡ã‚¬ãƒˆãƒ³</div>
                    <div>ç¾åœ¨ã®ä½ç½®: <span id="current-location">åœ°çƒ</span></div>
                </div>
            </div>
        </div>

        <div class="status-panel">
            <div class="status-card">
                <h4>ğŸŒŸ ä»Šæ—¥ã®NASAç”»åƒ</h4>
                <div id="nasa-image-status">èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
            <div class="status-card">
                <h4>ğŸ”¥ ã‚´ã‚¸ãƒ©ã®çŠ¶æ…‹</h4>
                <div id="godzilla-status">æº–å‚™å®Œäº†ï¼</div>
            </div>
            <div class="status-card">
                <h4>ğŸŒŒ å®‡å®™ã®çŠ¶æ³</h4>
                <div id="space-status">å¹³å’Œ</div>
            </div>
        </div>

        <div class="space-view" id="space-view">
            <h3>ğŸŒŒ å®‡å®™ãƒãƒƒãƒ— - ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¾µç•¥ï¼</h3>
            <div id="planets-container">
                <div class="loading">éŠ€æ²³ç³»ã‚’ã‚¹ã‚­ãƒ£ãƒ³ä¸­...</div>
            </div>
            <div id="nasa-image-container"></div>
        </div>

        <div class="mission-log">
            <h3>ğŸ“ ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ­ã‚°</h3>
            <div id="log-container">
                <div class="log-entry">ğŸ¦– ã‚´ã‚¸ãƒ©ãŒå®‡å®™é€²å‡ºã®æº–å‚™ã‚’é–‹å§‹ã—ã¾ã—ãŸ...</div>
            </div>
        </div>
    </div>

    <script>
        let gameData = {
            invasions: 0,
            destructionPower: 0,
            currentLocation: "åœ°çƒ",
            planets: [],
            logEntries: []
        };

        // NASA APIã‚­ãƒ¼ - https://api.nasa.gov/ ã§å–å¾—ã—ã¦ãã ã•ã„
      //  const NASA_API_KEY = prompt("NASA APIã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (https://api.nasa.gov/ ã§ç„¡æ–™å–å¾—):");
      
            const NASA_API_KEY = "9Dd3MFPcdKhJysbcyVhqfnqa7kaGDiB2832w9O35";


        // æ˜Ÿç©ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // ã‚³ã‚ºãƒŸãƒƒã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
        function createCosmicParticles() {
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'cosmic-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
                document.body.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 10000);
            }, 2000);
        }

        // åˆæœŸæƒ‘æ˜Ÿãƒ‡ãƒ¼ã‚¿
        const initialPlanets = [
            {name: "ç«æ˜Ÿ", type: "red", size: "medium", habitability: 0.3},
            {name: "æœ¨æ˜Ÿ", type: "gas", size: "large", habitability: 0.1},
            {name: "é‡‘æ˜Ÿ", type: "hot", size: "medium", habitability: 0.2},
            {name: "åœŸæ˜Ÿ", type: "ringed", size: "large", habitability: 0.1},
            {name: "æ°´æ˜Ÿ", type: "small", size: "small", habitability: 0.1},
            {name: "æµ·ç‹æ˜Ÿ", type: "ice", size: "large", habitability: 0.2}
        ];

        function initializePlanets() {
            gameData.planets = [...initialPlanets];
            renderPlanets();
        }

        function renderPlanets() {
            const container = document.getElementById('planets-container');
            container.innerHTML = '';
            
            gameData.planets.forEach((planet, index) => {
                const planetDiv = document.createElement('div');
                planetDiv.className = `planet ${planet.invaded ? 'invaded' : ''}`;
                
                let extraInfo = '';
                if (planet.realData) {
                    if (planet.diameter) {
                        extraInfo = `<div style="font-size: 0.7em;">ç›´å¾„: ${Math.round(planet.diameter)}m</div>`;
                    }
                    if (planet.temperature) {
                        extraInfo += `<div style="font-size: 0.7em;">æ°—æ¸©: ${planet.temperature}Â°C</div>`;
                    }
                    if (planet.source) {
                        extraInfo += `<div style="font-size: 0.6em; opacity: 0.7;">ğŸ“¡ ${planet.source}</div>`;
                    }
                }
                
                planetDiv.innerHTML = `
                    <div class="planet-name">${planet.name}</div>
                    <div style="font-size: 0.8em;">${planet.invaded ? 'ğŸ’¥ ä¾µç•¥æ¸ˆã¿' : 'ğŸŒ æœªä¾µç•¥'}</div>
                    ${extraInfo}
                `;
                planetDiv.onclick = () => invadePlanet(index);
                
                // ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã«é…ç½®
                planetDiv.style.position = 'absolute';
                planetDiv.style.left = Math.random() * 80 + '%';
                planetDiv.style.top = Math.random() * 60 + 100 + 'px';
                
                container.appendChild(planetDiv);
            });
        }

        function invadePlanet(index) {
            const planet = gameData.planets[index];
            if (planet.invaded) {
                addLog(`ğŸ¦– ${planet.name}ã¯æ—¢ã«åˆ¶åœ§æ¸ˆã¿ã§ã™ï¼`);
                return;
            }

            planet.invaded = true;
            gameData.invasions++;
            gameData.destructionPower += Math.floor(Math.random() * 1000 + 500);
            gameData.currentLocation = planet.name;

            // æ”»æ’ƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            const planetElement = document.querySelector('.planet:nth-child(' + (index + 1) + ')');
            if (planetElement) {
                const effect = document.createElement('div');
                effect.className = 'attack-effect';
                effect.innerHTML = 'ğŸ’¥ğŸ”¥ğŸ’¥';
                effect.style.left = planetElement.offsetLeft + 'px';
                effect.style.top = planetElement.offsetTop + 'px';
                document.getElementById('space-view').appendChild(effect);
                
                setTimeout(() => effect.remove(), 1000);
            }

            addLog(`ğŸ”¥ ã‚´ã‚¸ãƒ©ãŒ${planet.name}ã‚’ä¾µç•¥ã—ã¾ã—ãŸï¼ç ´å£ŠåŠ›+${Math.floor(planet.habitability * 1000)}ãƒ¡ã‚¬ãƒˆãƒ³`);
            
            renderPlanets();
            updateStats();
            updateSpaceStatus();
        }

        function randomAttack() {
            const unInvadedPlanets = gameData.planets.filter(p => !p.invaded);
            if (unInvadedPlanets.length === 0) {
                addLog("ğŸ¦– å…¨ã¦ã®æ—¢çŸ¥ã®æƒ‘æ˜Ÿã‚’åˆ¶åœ§æ¸ˆã¿ï¼æ–°ã—ã„æƒ‘æ˜Ÿã‚’ç™ºè¦‹ã—ã¦ãã ã•ã„ã€‚");
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * gameData.planets.length);
            invadePlanet(randomIndex);
        }

        function loadNASAData() {
            if (!NASA_API_KEY || NASA_API_KEY.trim() === '') {
                addLog("âŒ NASA APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™ï¼https://api.nasa.gov/ ã§å–å¾—ã—ã¦ãã ã•ã„");
                document.getElementById('nasa-image-status').innerHTML = 'âŒ APIã‚­ãƒ¼æœªè¨­å®š';
                return;
            }

            addLog("ğŸ›¸ NASA APIã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...");
            document.getElementById('nasa-image-status').innerHTML = 'ğŸ” NASA APIã‚¹ã‚­ãƒ£ãƒ³ä¸­...';
            
            // è¤‡æ•°ã®NASA APIã‚’é †æ¬¡å‘¼ã³å‡ºã—
            Promise.all([
                // APOD - Astronomy Picture of the Day
                fetch(`https://api.nasa.gov/planetary/apod?api_key=${NASA_API_KEY}`),
                // Neo - Near Earth Objects
                fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${getToday()}&end_date=${getToday()}&api_key=${NASA_API_KEY}`),
                // Mars Weather (InSight)
                fetch(`https://api.nasa.gov/insight_weather/?api_key=${NASA_API_KEY}&feedtype=json&ver=1.0`)
            ])
            .then(responses => Promise.all(responses.map(r => r.json())))
            .then(([apodData, neoData, marsData]) => {
                displayNASAImage(apodData);
                processNEOData(neoData);
                processMarsData(marsData);
                generatePlanetFromNASAData(apodData, neoData);
            })
            .catch(error => {
                console.error('NASA API ã‚¨ãƒ©ãƒ¼:', error);
                addLog(`âŒ NASA APIæ¥ç¶šã‚¨ãƒ©ãƒ¼: ${error.message}`);
                document.getElementById('nasa-image-status').innerHTML = 'âŒ APIæ¥ç¶šå¤±æ•—';
            });
        }

        function displayNASAImage(data) {
            const container = document.getElementById('nasa-image-container');
            if (data.media_type === 'image') {
                container.innerHTML = `
                    <h4>ğŸŒŒ NASA ä»Šæ—¥ã®å®‡å®™ç”»åƒ (${data.date})</h4>
                    <img src="${data.url}" alt="${data.title}" class="nasa-image" style="max-height: 200px;">
                    <p style="margin-top: 10px; font-size: 0.9em;"><strong>${data.title}</strong></p>
                    <p style="font-size: 0.8em; opacity: 0.8;">${data.explanation.substring(0, 200)}...</p>
                `;
                document.getElementById('nasa-image-status').innerHTML = 'âœ… APODå—ä¿¡å®Œäº†';
                addLog(`ğŸ“¸ NASAç”»åƒå–å¾—: ${data.title}`);
            } else if (data.media_type === 'video') {
                container.innerHTML = `
                    <h4>ğŸŒŒ NASA ä»Šæ—¥ã®å®‡å®™å‹•ç”» (${data.date})</h4>
                    <iframe src="${data.url}" width="100%" height="200" frameborder="0"></iframe>
                    <p style="margin-top: 10px; font-size: 0.9em;"><strong>${data.title}</strong></p>
                `;
                document.getElementById('nasa-image-status').innerHTML = 'âœ… å‹•ç”»å—ä¿¡å®Œäº†';
                addLog(`ğŸ¬ NASAå‹•ç”»å–å¾—: ${data.title}`);
            }
        }

        function processNEOData(neoData) {
            if (neoData.near_earth_objects) {
                const today = getToday();
                const todayNEOs = neoData.near_earth_objects[today] || [];
                
                addLog(`â˜„ï¸ æœ¬æ—¥ã®åœ°çƒæ¥è¿‘å°æƒ‘æ˜Ÿ: ${todayNEOs.length}å€‹ç™ºè¦‹`);
                
                todayNEOs.forEach((neo, index) => {
                    if (index < 3) { // æœ€åˆã®3å€‹ã ã‘è¡¨ç¤º
                        const diameter = neo.estimated_diameter.meters.estimated_diameter_max;
                        const speed = parseFloat(neo.close_approach_data[0].relative_velocity.kilometers_per_hour);
                        addLog(`ğŸª¨ ${neo.name}: ç›´å¾„${Math.round(diameter)}m, æ™‚é€Ÿ${Math.round(speed).toLocaleString()}km`);
                        
                        // NEOãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æƒ‘æ˜Ÿã‚’ç”Ÿæˆ
                        const neoPlanet = {
                            name: neo.name.replace(/[()]/g, ''),
                            type: "asteroid",
                            size: diameter > 1000 ? "large" : diameter > 100 ? "medium" : "small",
                            habitability: Math.min(diameter / 10000, 0.9),
                            invaded: false,
                            realData: true,
                            speed: speed,
                            diameter: diameter
                        };
                        gameData.planets.push(neoPlanet);
                    }
                });
                
                renderPlanets();
            }
        }

        function processMarsData(marsData) {
            if (marsData.sol_keys && marsData.sol_keys.length > 0) {
                const latestSol = marsData.sol_keys[marsData.sol_keys.length - 1];
                const solData = marsData[latestSol];
                
                if (solData.AT) {
                    const avgTemp = solData.AT.av;
                    addLog(`ğŸ”´ ç«æ˜Ÿæœ€æ–°æ°—æ¸©: ${avgTemp}Â°C (Sol ${latestSol})`);
                    
                    // ç«æ˜Ÿã®çŠ¶æ…‹ã‚’æ›´æ–°
                    const marsIndex = gameData.planets.findIndex(p => p.name === "ç«æ˜Ÿ");
                    if (marsIndex !== -1) {
                        gameData.planets[marsIndex].temperature = avgTemp;
                        gameData.planets[marsIndex].sol = latestSol;
                    }
                }
            }
        }

        function generatePlanetFromNASAData(apodData, neoData) {
            // APODãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æƒ‘æ˜Ÿåã‚’ç”Ÿæˆ
            const titleWords = apodData.title.split(' ');
            const planetName = `${titleWords[0]}-${titleWords[titleWords.length - 1]}`;
            
            const newPlanet = {
                name: planetName,
                type: "deep_space",
                size: ["small", "medium", "large"][Math.floor(Math.random() * 3)],
                habitability: Math.random() * 0.8,
                invaded: false,
                realData: true,
                source: "APOD",
                description: apodData.explanation.substring(0, 100) + "..."
            };
            
            gameData.planets.push(newPlanet);
            addLog(`ğŸŒŸ APODç”»åƒã‹ã‚‰æ–°å¤©ä½“ã€Œ${planetName}ã€ã‚’ç™ºè¦‹ï¼`);
            renderPlanets();
        }

        function getToday() {
            const today = new Date();
            return today.toISOString().split('T')[0];
        }

        function updateStats() {
            document.getElementById('invaded-count').textContent = gameData.invasions;
            document.getElementById('destruction-power').textContent = gameData.destructionPower.toLocaleString();
            document.getElementById('current-location').textContent = gameData.currentLocation;
        }

        function updateSpaceStatus() {
            const invasionRate = gameData.invasions / gameData.planets.length;
            let status = "å¹³å’Œ";
            
            if (invasionRate > 0.8) {
                status = "ğŸ”¥ ã‚´ã‚¸ãƒ©å¸å›½æ”¯é…ä¸‹";
                document.getElementById('godzilla-status').innerHTML = 'ğŸ‘‘ éŠ€æ²³çš‡å¸';
            } else if (invasionRate > 0.5) {
                status = "âš¡ æˆ¦äº‰çŠ¶æ…‹";
                document.getElementById('godzilla-status').innerHTML = 'ğŸ’ª é€²æ’ƒä¸­';
            } else if (invasionRate > 0.2) {
                status = "ğŸš¨ è­¦æˆ’çŠ¶æ…‹";
                document.getElementById('godzilla-status').innerHTML = 'ğŸ˜¤ æ”»æ’ƒæº–å‚™';
            }
            
            document.getElementById('space-status').textContent = status;
        }

        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            
            const container = document.getElementById('log-container');
            container.appendChild(logEntry);
            container.scrollTop = container.scrollHeight;
            
            // ãƒ­ã‚°ãŒå¤šã™ãã‚‹å ´åˆã¯å¤ã„ã‚‚ã®ã‚’å‰Šé™¤
            if (container.children.length > 50) {
                container.removeChild(container.firstChild);
            }
        }

        function resetGame() {
            gameData = {
                invasions: 0,
                destructionPower: 0,
                currentLocation: "åœ°çƒ",
                planets: [],
                logEntries: []
            };
            
            document.getElementById('log-container').innerHTML = '<div class="log-entry">ğŸ¦– ã‚´ã‚¸ãƒ©ãŒå®‡å®™é€²å‡ºã®æº–å‚™ã‚’é–‹å§‹ã—ã¾ã—ãŸ...</div>';
            document.getElementById('nasa-image-container').innerHTML = '';
            document.getElementById('nasa-image-status').innerHTML = 'å¾…æ©Ÿä¸­...';
            document.getElementById('godzilla-status').innerHTML = 'æº–å‚™å®Œäº†ï¼';
            document.getElementById('space-status').innerHTML = 'å¹³å’Œ';
            
            initializePlanets();
            updateStats();
            addLog("ğŸ”„ ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚æ–°ãŸãªä¾µç•¥ã®å§‹ã¾ã‚Šã§ã™ï¼");
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            if (!NASA_API_KEY || NASA_API_KEY.trim() === '' || NASA_API_KEY === 'null') {
                alert("NASA APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™ï¼\n\n1. https://api.nasa.gov/ ã«ã‚¢ã‚¯ã‚»ã‚¹\n2. ç„¡æ–™ã§APIã‚­ãƒ¼ã‚’å–å¾—\n3. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦å…¥åŠ›ã—ã¦ãã ã•ã„");
                return;
            }
            
            createStars();
            createCosmicParticles();
            initializePlanets();
            updateStats();
            
            // NASA APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            setTimeout(() => {
                loadNASAData();
            }, 1000);
            
            // è‡ªå‹•ã§ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
            setInterval(() => {
                if (Math.random() < 0.3) {
                    const events = [
                        "ğŸ›¸ æ·±å®‡å®™ã‹ã‚‰ã®ä¿¡å·ã‚’å—ä¿¡ã—ã¾ã—ãŸ",
                        "â˜„ï¸ æ–°ã—ã„å°æƒ‘æ˜ŸãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ", 
                        "ğŸŒŒ ã‚¬ãƒ³ãƒç·šãƒãƒ¼ã‚¹ãƒˆã‚’è¦³æ¸¬ã—ã¾ã—ãŸ",
                        "ğŸš€ å›½éš›å®‡å®™ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å ±å‘ŠãŒã‚ã‚Šã¾ã—ãŸ"
                    ];
                    addLog(events[Math.floor(Math.random() * events.length)]);
                }
            }, 15000);
        };
    </script>
</body>
</html>